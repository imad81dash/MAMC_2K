
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAMC 2K | Global Network</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #2c3e50; --accent: #3498db; --marker-green: #2ecc71; --bg-sidebar: #ffffff; --text-main: #333; --text-light: #7f8c8d; --border: #ecf0f1; --btn-bg: #f8f9fa; }
        [data-theme="dark"] { --primary: #ecf0f1; --accent: #e74c3c; --marker-green: #27ae60; --bg-sidebar: #1a1a1a; --text-main: #ecf0f1; --text-light: #95a5a6; --border: #2c3e50; --btn-bg: #333; }
        body { margin: 0; padding: 0; font-family: "Inter", sans-serif; display: flex; height: 100vh; overflow: hidden; background-color: #1a1a1a; }
        
        /* --- DESKTOP LAYOUT --- */
        #sidebar { width: 350px; background: var(--bg-sidebar); border-right: 1px solid var(--border); display: flex; flex-direction: column; z-index: 1000; box-shadow: 2px 0 10px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
        #map-container { flex: 1; position: relative; background-color: #262626; }
        #map { width: 100%; height: 100%; }

        /* --- MOBILE LAYOUT (Responsive Overrides) --- */
        @media (max-width: 768px) {
            body { flex-direction: column-reverse; } /* Map on top, sidebar on bottom */
            
            #sidebar {
                width: 100%;
                height: 40%; /* Take up bottom 40% */
                border-right: none;
                border-top: 1px solid var(--border);
                position: relative;
                z-index: 2000;
            }
            
            #map-container {
                height: 60%; /* Take up top 60% */
                width: 100%;
            }

            .header { padding: 10px 15px; }
            .header h1 { font-size: 1rem; }
            .stats-bar { padding: 10px 15px; }
            .search-container { padding: 10px 15px; }
            .alumni-item { padding: 10px 15px; }
        }

        .header { padding: 20px; border-bottom: 1px solid var(--border); background: linear-gradient(135deg, #2c3e50, #34495e); color: white; }
        .header h1 { margin: 0; font-size: 1.2rem; font-weight: 600; }
        .header p { margin: 5px 0 0; font-size: 0.8rem; opacity: 0.8; }
        .stats-bar { padding: 15px 20px; display: flex; justify-content: space-between; border-bottom: 1px solid var(--border); background: var(--bg-sidebar); }
        .stat-item { text-align: center; }
        .stat-val { display: block; font-weight: 600; font-size: 1.1rem; color: var(--accent); }
        .stat-label { font-size: 0.7rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.5px; }
        .search-container { padding: 15px 20px; border-bottom: 1px solid var(--border); display: flex; gap: 10px; }
        .search-box { flex: 1; padding: 10px; border: 1px solid #333; border-radius: 6px; font-family: inherit; box-sizing: border-box; background: var(--bg-sidebar); color: var(--text-main); }
        .reset-btn { padding: 0 15px; background: var(--btn-bg); border: 1px solid #333; border-radius: 6px; color: var(--text-main); cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .reset-btn:hover { background: var(--accent); color: white; border-color: var(--accent); }
        .alumni-list { flex: 1; overflow-y: auto; padding: 0; list-style: none; margin: 0; }
        .alumni-item { padding: 15px 20px; border-bottom: 1px solid var(--border); cursor: pointer; transition: background 0.2s; }
        .alumni-item:hover { background: rgba(52, 152, 219, 0.1); }
        .alumni-item h3 { margin: 0 0 5px; font-size: 0.95rem; color: var(--text-main); }
        .alumni-item .role { font-size: 0.8rem; color: var(--accent); display: block; margin-bottom: 3px; }
        .alumni-item .location { font-size: 0.75rem; color: var(--text-light); }
        .profile-link { display: inline-block; margin-top: 8px; font-size: 0.75rem; color: var(--accent); text-decoration: none; border: 1px solid var(--accent); padding: 2px 8px; border-radius: 4px; }
        .profile-link:hover { background-color: var(--accent); color: white; }
        
        .country-marker { background-color: var(--marker-green); border: 2px solid white; border-radius: 50%; text-align: center; color: white; box-shadow: 0 0 15px rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; font-size: 16px; font-weight: bold; transition: all 0.4s ease; z-index: 500; cursor: pointer; }
        .country-marker:hover { transform: scale(1.1); }
        .country-marker.dimmed { opacity: 0.2 !important; filter: grayscale(100%) blur(0.5px); transform: scale(0.9); z-index: 100; }
        .country-marker.active-focus { opacity: 1 !important; transform: scale(1.2); z-index: 1000 !important; box-shadow: 0 0 30px rgba(46, 204, 113, 0.6); border-color: #fff; }
        .student-label { background: none; border: none; box-shadow: none; font-weight: 700; color: var(--text-main); text-shadow: 0 0 4px #fff; font-size: 12px; white-space: nowrap; }
        [data-theme="dark"] .student-label { color: #fff; text-shadow: 0 0 4px #000; }
        .label-left { text-align: right; } .label-right { text-align: left; }
        .clickable-marker { cursor: pointer !important; } .clickable-marker:hover { opacity: 0.8; }
    </style>
</head>
<body data-theme="dark">
    <div id="sidebar">
        <div class="header"><h1>MAMC 2K</h1><p>Global Affiliations Map</p></div>
        <div class="stats-bar">
            <div class="stat-item"><span class="stat-val" id="total-count">0</span><span class="stat-label">Alumni</span></div>
            <div class="stat-item"><span class="stat-val" id="country-count">0</span><span class="stat-label">Countries</span></div>
        </div>
        <div class="search-container">
            <input type="text" id="search" class="search-box" placeholder="Search name, city...">
            <button class="reset-btn" onclick="resetApp()" title="Reset View"><i class="fas fa-undo"></i></button>
        </div>
        <ul class="alumni-list" id="alumni-list"></ul>
    </div>
    <div id="map-container"><div id="map"></div></div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // --- INJECTED DATA ---
        const alumniData = [
  {
    "id": 1,
    "name": "Aashima Dabas",
    "role": "Faculty",
    "hospital": "Maulana Azad Medical College",
    "city": "New Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209,
    "url": "https://mamc.delhi.gov.in/node/10357"
  },
  {
    "id": 2,
    "name": "Adarsh Singh",
    "role": "Indian Administrative Service (Ias)",
    "hospital": "Government Of Uttar Pradesh",
    "city": "Lucknow",
    "country": "India",
    "lat": 26.8381,
    "lng": 80.9346,
    "url": "https://www.linkedin.com/in/adarsh-singh-88b544172/?original_referer=https%3A%2F%2Fwww%2Egoogle%2Ecom%2F&originalSubdomain=in"
  },
  {
    "id": 3,
    "name": "Anuj Jain",
    "role": "Senior Consultant",
    "hospital": "Aakash Healthcare Super Speciality Hospital",
    "city": "New Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209
  },
  {
    "id": 4,
    "name": "Aparna Singhal",
    "role": "Professor",
    "hospital": "University Of Alabama",
    "city": "Birmingham",
    "country": "United States Of America",
    "lat": 33.5207,
    "lng": -86.8024,
    "url": "https://scholars.uab.edu/2851-aparna-singhal"
  },
  {
    "id": 5,
    "name": "Dinesh Yadav",
    "role": "Consultant",
    "hospital": "Madhav Hospital",
    "city": "Behror",
    "country": "India",
    "lat": 27.8901,
    "lng": 76.2858
  },
  {
    "id": 6,
    "name": "‚Å†Irfan Ahmad",
    "role": "Consultant",
    "hospital": "Rajiv Gandhi Cancer Institute & Reseach Centre",
    "city": "New Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209,
    "url": "https://www.rgcirc.org/doctor/dr-irfan-ahmad/"
  },
  {
    "id": 7,
    "name": "Megha Goyal",
    "role": "Consultant",
    "hospital": "Narain Hospital",
    "city": "Delhi & Bahadurgarh",
    "country": "India",
    "lat": 28.8123,
    "lng": 76.856
  },
  {
    "id": 8,
    "name": "Neethu",
    "hospital": "Ut Health Science Center At Houston",
    "city": "Houston",
    "country": "United States Of America",
    "lat": 29.7589,
    "lng": -95.3677,
    "url": "https://med.uth.edu/pediatrics/2024/06/21/neethu-m-menon-md/"
  },
  {
    "id": 9,
    "name": "Pranay Ghosh",
    "role": "Director",
    "hospital": "Elixir Fertility Centre",
    "city": "New Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209,
    "url": "https://www.elixirfertility.com/dr-pranay-ghosh.html"
  },
  {
    "id": 10,
    "name": "Rupinder Kochhar",
    "role": "Consultant",
    "hospital": "Salford Royal Hospital, Northern Care Alliance Nhs Trust",
    "city": "Manchester",
    "country": "United Kingdom",
    "lat": 53.4795,
    "lng": -2.2451
  },
  {
    "id": 11,
    "name": "Sakshi Goyal/ Bansal",
    "role": "Consultant",
    "hospital": "Bansal Ivf And Bansal Nursing Home",
    "city": "Sonipat",
    "country": "India",
    "lat": 28.9954,
    "lng": 77.0234,
    "url": "https://bansalivf.com/"
  },
  {
    "id": 12,
    "name": "Sandeep Goyal",
    "role": "Consultant",
    "hospital": "Piedmont Heart Institute",
    "city": "Atlanta",
    "country": "United States Of America",
    "lat": 33.7545,
    "lng": -84.3898,
    "url": "https://www.care.piedmont.org/provider/Sandeep+Kumar+Goyal/387743"
  },
  {
    "id": 13,
    "name": "Shilpa Khanna Arora",
    "role": "Professor",
    "hospital": "Abvims & Dr Rml Hospital",
    "city": "Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209,
    "url": "https://rmlh.irins.org/profile/433009"
  },
  {
    "id": 14,
    "name": "Shilpa Goel",
    "role": "Director , Consultant",
    "hospital": "Vision Plus Eye Clinic",
    "city": "Gurgaon",
    "country": "India",
    "lat": 28.4646,
    "lng": 77.0299,
    "url": "https://visionpluseye.org/know-your-doctor/"
  },
  {
    "id": 15,
    "name": "Shipra Aggarwal",
    "role": "Professor",
    "hospital": "Vmmc & Sjh",
    "city": "Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209,
    "url": "http://www.vmmc-sjh.nic.in/"
  },
  {
    "id": 16,
    "name": "Siddharth Bansal",
    "role": "Physician Advisor",
    "hospital": "Baptist Health",
    "city": "Birmingham",
    "country": "United States Of America",
    "lat": 33.5207,
    "lng": -86.8024,
    "url": "https://health.usnews.com/doctors/siddharth-bansal-908006"
  },
  {
    "id": 17,
    "name": "Sumit Arora",
    "role": "Professor",
    "hospital": "Maulana Azad Medical College",
    "city": "Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209,
    "url": "https://mamc.delhi.gov.in/node/11782"
  },
  {
    "id": 18,
    "name": "Vikram Deogam",
    "role": "General Physician",
    "hospital": "Ayushman Aarogya Mandir",
    "city": "Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209
  },
  {
    "id": 19,
    "name": "Vipin Kumar Singh",
    "hospital": "Crpf",
    "city": "Sopore",
    "country": "India",
    "lat": 34.2869,
    "lng": 74.4626
  },
  {
    "id": 20,
    "name": "Chandra Pal Gautam",
    "role": "Cmo",
    "hospital": "Cghs",
    "city": "Delhi",
    "country": "India",
    "lat": 28.6139,
    "lng": 77.209
  }
];

        // --- APP LOGIC ---
        const map = L.map("map", { zoomControl: false, minZoom: 2, maxBounds: [[-90,-180],[90,180]] }).setView([20,0], 2);
        
        // Adjust zoom control position for mobile
        const zoomPosition = window.innerWidth < 768 ? "topright" : "bottomright";
        L.control.zoom({ position: zoomPosition }).addTo(map);
        
        L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png", { 
            attribution: "&copy; OpenStreetMap &copy; CARTO", 
            subdomains: "abcd", 
            maxZoom: 19 
        }).addTo(map);

        const countryLayer = L.layerGroup().addTo(map);
        const detailsLayer = L.layerGroup().addTo(map);
        const countryGroups = {};
        const countryMarkersMap = {};

        alumniData.forEach(alum => {
            if (isNaN(alum.lat) || isNaN(alum.lng)) return;
            if (!countryGroups[alum.country]) countryGroups[alum.country] = { count: 0, latSum: 0, lngSum: 0, students: [] };
            const g = countryGroups[alum.country];
            g.count++; g.latSum += alum.lat; g.lngSum += alum.lng; g.students.push(alum);
        });

        function renderCountries() {
            countryLayer.clearLayers();
            Object.keys(countryGroups).forEach(country => {
                const g = countryGroups[country];
                if(g.count === 0) return;
                const lat = g.latSum / g.count; const lng = g.lngSum / g.count;
                g.center = [lat, lng];
                const size = 30 + (Math.min(g.count, 50) * 0.5);
                const icon = L.divIcon({ className: "country-marker", html: `<span>${g.count}</span>`, iconSize: [size, size], iconAnchor: [size/2, size/2] });
                const marker = L.marker([lat, lng], { icon: icon });
                marker.countryName = country;
                marker.on("click", () => activateCountry(country));
                countryLayer.addLayer(marker);
                countryMarkersMap[country] = marker;
            });
        }

        function activateCountry(countryName) {
            detailsLayer.clearLayers();
            const g = countryGroups[countryName];
            if(!g) return;
            Object.keys(countryMarkersMap).forEach(k => {
                const el = countryMarkersMap[k].getElement();
                if(el) {
                    if(k === countryName) { el.classList.remove("dimmed"); el.classList.add("active-focus"); }
                    else { el.classList.add("dimmed"); el.classList.remove("active-focus"); }
                }
            });
            renderList("", g.students.map(s => s.id));
            
            const sorted = [...g.students].sort((a,b) => a.id - b.id);
            const rowHeight = 5.0; 
            const startLat = g.center[0] + (Math.ceil(sorted.length/2)*rowHeight)/2 - (rowHeight/2);
            
            sorted.forEach((s, i) => {
                const isRight = i % 2 === 0;
                const row = Math.floor(i / 2);
                const dLat = startLat - (row * rowHeight);
                const dLng = g.center[1] + (12.0 * (isRight ? 1 : -1));
                
                const line = L.polyline([g.center, [dLat, dLng]], { color: "#e74c3c", weight: 1, opacity: 0.6, interactive: false });
                const labelIcon = L.divIcon({ className: `student-label ${isRight ? "label-right" : "label-left"} ${s.url ? "clickable-marker" : ""}`, html: s.name, iconSize: [120, 20], iconAnchor: [isRight ? -5 : 120, 10] });
                const label = L.marker([dLat, dLng], { icon: labelIcon, interactive: !!s.url });
                
                detailsLayer.addLayer(line);
                detailsLayer.addLayer(label);
                if(s.url) label.on("click", () => window.open(s.url, "_blank"));
            });
        }

        function renderList(filter = "", ids = null) {
            const list = document.getElementById("alumni-list");
            list.innerHTML = "";
            let data = alumniData.filter(a => a.name.toLowerCase().includes(filter) || a.city.toLowerCase().includes(filter) || a.country.toLowerCase().includes(filter));
            if(ids) data = data.filter(a => ids.includes(a.id));
            
            document.getElementById("total-count").innerText = data.length;
            document.getElementById("country-count").innerText = new Set(data.map(a => a.country)).size;
            
            if(data.length === 0) { list.innerHTML = "<li style='padding:20px; text-align:center; color:#777'>No alumni found</li>"; return; }
            
            data.forEach(a => {
                const li = document.createElement("li");
                li.className = "alumni-item";
                li.innerHTML = `<h3>${a.name}</h3><span class="role">${a.role}</span><span class="location"><i class="fas fa-map-marker-alt"></i> ${a.city}, ${a.country}</span>${a.url ? `<a href="${a.url}" target="_blank" class="profile-link" onclick="event.stopPropagation()">View Profile</a>` : ""}`;
                li.onclick = () => map.panTo([a.lat, a.lng]);
                list.appendChild(li);
            });
        }

        function resetApp() {
            map.setView([20,0], 2);
            document.getElementById("search").value = "";
            detailsLayer.clearLayers();
            Object.values(countryMarkersMap).forEach(m => { const el = m.getElement(); if(el) { el.classList.remove("dimmed"); el.classList.remove("active-focus"); }});
            renderList();
        }

        renderCountries();
        renderList();
        document.getElementById("search").addEventListener("input", (e) => renderList(e.target.value.toLowerCase()));
    </script>
</body>
</html>

